<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch nh·∫≠n ph√≤ng</title>
  <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.3/css/bootstrap.min.css}">
</head>
<body class="bg-light">

<!-- Header d√πng chung -->
<th:block th:replace="~{_header :: _header}"></th:block>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
    <h3 class="text-primary mb-2">Danh s√°ch Nh·∫≠n ph√≤ng</h3>

    <form class="d-flex mb-2" th:action="@{/admissions}" method="get">
      <input class="form-control me-2" type="search" name="keyword"
             th:value="${keyword}" placeholder="üîç T√¨m theo t√™n b·ªánh nh√¢n ho·∫∑c m√£ ph√≤ng...">
      <button class="btn btn-outline-primary" type="submit">T√¨m</button>
    </form>

    <div>
      <a href="/admissions/new" class="btn btn-success mb-2">‚ûï Th√™m m·ªõi</a>
      <a href="/" class="btn btn-secondary mb-2">Trang ch·ªß</a>
    </div>
  </div>

  <table class="table table-bordered table-hover bg-white shadow-sm">
    <thead class="table-primary text-center">
    <tr>
      <th>ID</th>
      <th>B·ªánh nh√¢n</th>
      <th>Ph√≤ng</th>
      <th>Gi·ªù v√†o</th>
      <th>Gi·ªù ra</th>
      <th>Thao t√°c</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="a : ${items}">
      <td th:text="${a.id}"></td>
      <td th:text="${a.patient.fullName}"></td>
      <td th:text="${a.room.code}"></td>
      <td th:text="${#temporals.format(a.checkIn, 'yyyy-MM-dd HH:mm')}"></td>
      <td th:text="${a.checkOut != null ? #temporals.format(a.checkOut, 'yyyy-MM-dd HH:mm') : 'Ch∆∞a xu·∫•t vi·ªán'}"></td>
      <td class="text-center">
        <a class="btn btn-sm btn-warning" th:href="@{'/admissions/' + ${a.id} + '/edit'}">‚úè S·ª≠a</a>
        <form th:action="@{'/admissions/' + ${a.id} + '/delete'}" method="post" style="display:inline">
          <button class="btn btn-sm btn-danger" onclick="return confirm('X√≥a b·∫£n ghi n√†y?')">üóë X√≥a</button>
        </form>
      </td>
    </tr>
    <tr th:if="${#lists.isEmpty(items)}">
      <td colspan="6" class="text-center text-muted fst-italic">Kh√¥ng c√≥ d·ªØ li·ªáu nh·∫≠n ph√≤ng.</td>
    </tr>
    </tbody>
  </table>
</div>

<!-- Footer -->
<th:block th:replace="~{_footer :: _footer}"></th:block>
</body>
</html>
